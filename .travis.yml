language: node_js
sudo: true

branches:
  only:
    - master

node_js:
  - "12"

before_install:
  #- curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.9.2
  #- export PATH=$HOME/.yarn/bin:$PATH
  - npm install pkg

cache:
  yarn: true

script:
  - export NODE_ENV=production
before_deploy:
  - pkg scarlet.js
deploy:
     provider: releases
     api_key:
         secure: cbd8eb6aae1fcd62013d86294a4b02d2830aabe1
     file:
         - scarlet-linux
         - scarlet-macos
         - scarlet-win.exe
     skip_cleanup: true
     on:
         branch: travisConfig
